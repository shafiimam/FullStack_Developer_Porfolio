import { Box, useColorMode } from '@chakra-ui/react';
import React, { useEffect, useState } from 'react';
import {
  motion,
  useAnimation,
  useAnimationControls,
  AnimatePresence,
} from 'framer-motion';
import theme from '../../theme';
export default function Logo() {
  const { colorMode } = useColorMode();
  const [isMobile, setIsMobile] = useState(false);
  const svgFill =
    colorMode === 'light'
      ? theme.colors.brand.dark['500']
      : theme.colors.brand.light['500'];
  useEffect(() => {
    if (window.innerWidth < 768) {
      setIsMobile(true);
    }
    return () => {};
  }, []);

  useEffect(() => {
    window.addEventListener('resize', () => {
      if (window.innerWidth < 768) {
        setIsMobile(true);
      } else {
        setIsMobile(false);
      }
    });
    return () => {
      window.removeEventListener('resize', () => {
        if (window.innerWidth < 768) {
          setIsMobile(true);
        } else {
          setIsMobile(false);
        }
      });
    };
  }, []);
  const animationControls = useAnimationControls();
  async function sequence() {
    await animationControls.start({
      opacity: 1,
      pathLength: [0, 1],
      fill: 'none',
    });
    await animationControls.start({
      fill: ['#fffff', svgFill],
    });
  }
  useEffect(() => {
    sequence();
  }, [colorMode]);
  return (
    <Box
      sx={{
        position: isMobile ? 'absolute' : 'relative',
        height: '110px',
        width: '100px',
      }}
      className='shafi-logo'
    >
      <motion.svg
        id='Layer_1'
        data-name='Layer 1'
        xmlns='http://www.w3.org/2000/svg'
        viewBox='0 0 117.04 145.09'
      >
        <motion.path
          d='M48.55,130.52a7.76,7.76,0,0,1,.65-3.69c.43-.72,1.35-1.09,2.74-1.09H70.67c1.46,0,2.4.3,2.84.9a5.66,5.66,0,0,1,.64,3.18v4.49a16.39,16.39,0,0,0,1,6.31,11.34,11.34,0,0,0,2.74,4,10,10,0,0,0,3.68,2.2,13.23,13.23,0,0,0,4,.64,12,12,0,0,0,4.48-.84,11,11,0,0,0,3.64-2.39,12,12,0,0,0,3.43-8.62,18.4,18.4,0,0,0-1-6.42,19.63,19.63,0,0,0-3.27-5.57,38,38,0,0,0-5.53-5.53q-3.39-2.84-8-6.63-8.07-6.36-13.89-11.2a63,63,0,0,1-9.62-9.76,33.82,33.82,0,0,1-5.57-10.86,50.66,50.66,0,0,1-1.8-14.49A33.29,33.29,0,0,1,61.25,37.62,35.86,35.86,0,0,1,73,31.4a39.78,39.78,0,0,1,11.7-1.94A39.19,39.19,0,0,1,99.2,32.05a33.46,33.46,0,0,1,11.46,7.32,32.58,32.58,0,0,1,7.52,11.45,40,40,0,0,1,2.69,15V71.6a4.17,4.17,0,0,1-.75,2.94c-.5.5-1.58.75-3.23.75H98.66c-1.33,0-2.18-.27-2.54-.8a5.37,5.37,0,0,1-.55-2.89V65.92a16.41,16.41,0,0,0-.7-4.88,11.58,11.58,0,0,0-2-4,9.55,9.55,0,0,0-3.39-2.69,10.57,10.57,0,0,0-4.73-1,11.18,11.18,0,0,0-3.83.7,9.82,9.82,0,0,0-3.49,2.19,11.35,11.35,0,0,0-2.54,3.89,15.36,15.36,0,0,0-1,5.77,17.45,17.45,0,0,0,1,6.28,18.57,18.57,0,0,0,3,5,31.19,31.19,0,0,0,4.73,4.53c1.86,1.46,3.92,3.06,6.18,4.78Q96,91.86,102.24,96.9a70.71,70.71,0,0,1,10.86,10.81,46.78,46.78,0,0,1,7.32,12.8A45.76,45.76,0,0,1,123.11,137a32.67,32.67,0,0,1-2.74,13.25,33.69,33.69,0,0,1-7.67,11,36.92,36.92,0,0,1-11.85,7.52,44.86,44.86,0,0,1-31.53-.15,33.46,33.46,0,0,1-11.5-7.92,32.92,32.92,0,0,1-6.93-11.4,40.35,40.35,0,0,1-2.29-13.5Z'
          transform='translate(-46.98 -27.95)'
          initial={{
            opacity: 0,
            pathLength: 0,
            fill: 'none',
          }}
          // animation end state
          animate={animationControls}
          transition={{
            duration: 3,
            ease: 'easeInOut',
          }}
          stroke={svgFill}
        />
        <motion.path
          d='M135.21,35.39a4.26,4.26,0,0,1,.9-2.84,3.23,3.23,0,0,1,2.59-1h20.42a3.07,3.07,0,0,1,2.54,1,4.44,4.44,0,0,1,.85,2.84V165.62q0,3.8-3.39,3.79H138.7c-2.32,0-3.49-1.27-3.49-3.79Z'
          transform='translate(-46.98 -27.95)'
          initial={{
            opacity: 0,
            pathLength: 0,
            fill: 'none',
          }}
          // animation end state
          animate={animationControls}
          transition={{
            duration: 3,
            ease: 'easeInOut',
          }}
          stroke={svgFill}
        />
      </motion.svg>

      <AnimatePresence exitBeforeEnter>
        <Box
          sx={{
            height: ' 22px',
            width: '100px',
            position: 'absolute',
            top: '50px',
            background:
              colorMode === 'dark' ? 'brand.dark.200' : 'brand.light.200',
          }}
          className='dev-logo'
        >
          <motion.svg
            id='Layer_1'
            data-name='Layer 1'
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 185.41 41.49'
            initial={{
              opacity: 0,
              x: -100,
            }}
            animate={{
              opacity: 1,
              x: 2,
              transition: {
                duration: 0.2,
                delay: 0.5,
                delayChildren: 0.5,
              },
            }}
          >
            <rect fill={svgFill} x='0.5' y='0.5' width='184.41' height='1.84' />
            <rect
              fill={svgFill}
              x='0.5'
              y='39.15'
              width='184.41'
              height='1.84'
            />
            <motion.path
              className='cls-2'
              d='M283.41,258.72a.71.71,0,0,1,.14-.46.52.52,0,0,1,.42-.17h5.61a7.56,7.56,0,0,1,2.36.37,5.85,5.85,0,0,1,1.93,1.05,5.09,5.09,0,0,1,1.28,1.77,5.89,5.89,0,0,1,.47,2.44v10.79a5.83,5.83,0,0,1-.47,2.44,5,5,0,0,1-1.27,1.77,5.38,5.38,0,0,1-1.9,1.09,7,7,0,0,1-2.36.37H284c-.37,0-.56-.2-.56-.61Zm6.06,17.63a1.7,1.7,0,0,0,.73-.17,1.53,1.53,0,0,0,.56-.42,1.79,1.79,0,0,0,.36-.61,2.17,2.17,0,0,0,.13-.76V263.93a1.73,1.73,0,0,0-1.44-2l-.35,0H287.8v14.38Z'
              transform='translate(-218.81 -248.83)'
              initial={{
                opacity: 0,
                rotate: -45,
                pathLength: 0,
              }}
              animate={{
                opacity: 1,
                rotate: 0,
                pathLength: 1,
              }}
              transition={{
                duration: 1,
                ease: 'easeInOut',
              }}
              exit={{ rotate: 0, opacity: 0 }}
            />
            <path
              className='cls-2'
              d='M306.1,258.72a.71.71,0,0,1,.14-.46.59.59,0,0,1,.42-.17h9.78c.31,0,.46.2.46.59v2.72c0,.38-.15.58-.46.58h-6v5.13h4.75a.65.65,0,0,1,.38.13.58.58,0,0,1,.15.43v2.73a.57.57,0,0,1-.14.42.56.56,0,0,1-.39.13h-4.74v5.42h6a.48.48,0,0,1,.34.14.57.57,0,0,1,.14.41v2.75a.57.57,0,0,1-.14.42.48.48,0,0,1-.34.14h-9.86c-.37,0-.56-.2-.56-.61v-20.9Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              className='cls-2'
              d='M334.34,279.64c-.1.37-.3.56-.62.56H331.1a.63.63,0,0,1-.64-.56l-4.54-20.93a.72.72,0,0,1,0-.46.33.33,0,0,1,.31-.17h3.27a.84.84,0,0,1,.44.13.51.51,0,0,1,.23.4l2,12.83.16,1.87.18-1.87,2-12.83a.55.55,0,0,1,.23-.4.94.94,0,0,1,.44-.13h3.27a.32.32,0,0,1,.31.16.54.54,0,0,1,0,.43Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              className='cls-3'
              d='M284.12,259a.71.71,0,0,1,.14-.46.59.59,0,0,1,.42-.17h5.62a7.56,7.56,0,0,1,2.36.37,6,6,0,0,1,1.92,1.09,5.32,5.32,0,0,1,1.28,1.77,6.22,6.22,0,0,1,.46,2.44v10.77a6,6,0,0,1-.46,2.44,4.91,4.91,0,0,1-1.28,1.77,5.34,5.34,0,0,1-1.89,1.09,7,7,0,0,1-2.36.37h-5.65c-.37,0-.56-.2-.56-.61Zm6.06,17.63a1.81,1.81,0,0,0,.69-.14,1.76,1.76,0,0,0,.56-.42,1.79,1.79,0,0,0,.36-.61,2.17,2.17,0,0,0,.13-.76V264.23a1.73,1.73,0,0,0-1.44-2l-.35,0h-1.66v14.38Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              className='cls-3'
              d='M306.81,259a.71.71,0,0,1,.14-.46.59.59,0,0,1,.42-.17h9.78c.31,0,.46.2.46.59v2.72c0,.38-.15.58-.46.58h-6v5.13h4.74a.65.65,0,0,1,.38.13.58.58,0,0,1,.15.43v2.73a.57.57,0,0,1-.14.42.48.48,0,0,1-.38.13h-4.75v5.42h6a.48.48,0,0,1,.34.14.57.57,0,0,1,.14.41V280a.57.57,0,0,1-.14.42.48.48,0,0,1-.34.14h-9.78c-.37,0-.56-.2-.56-.61Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              className='cls-3'
              d='M335.05,279.94c-.11.37-.3.56-.62.56h-2.62a.63.63,0,0,1-.64-.56L326.63,259a.72.72,0,0,1,0-.46.33.33,0,0,1,.31-.17h3.27a.84.84,0,0,1,.44.13.51.51,0,0,1,.23.4l2,12.83.16,1.87.18-1.87,2-12.83a.55.55,0,0,1,.23-.4.94.94,0,0,1,.44-.13h3.27a.32.32,0,0,1,.31.16.54.54,0,0,1,0,.43Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              fill={svgFill}
              d='M283.8,259a.71.71,0,0,1,.14-.46.52.52,0,0,1,.42-.17H290a7.56,7.56,0,0,1,2.36.37,5.8,5.8,0,0,1,1.92,1.09,5.09,5.09,0,0,1,1.28,1.77,6,6,0,0,1,.46,2.44v10.77a5.82,5.82,0,0,1-.46,2.44,5,5,0,0,1-1.27,1.77,5.38,5.38,0,0,1-1.9,1.09,7,7,0,0,1-2.36.37h-5.64c-.37,0-.56-.2-.56-.61Zm6,17.63a1.7,1.7,0,0,0,.73-.17,1.5,1.5,0,0,0,.55-.42,1.57,1.57,0,0,0,.36-.61,2.18,2.18,0,0,0,.14-.76V264.24a1.73,1.73,0,0,0-1.44-2l-.35,0h-1.66v14.38Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              fill={svgFill}
              d='M306.48,259a.71.71,0,0,1,.14-.46.59.59,0,0,1,.42-.17h9.83c.31,0,.46.2.46.59v2.72c0,.38-.15.58-.46.58h-6v5.13h4.74a.65.65,0,0,1,.38.13.58.58,0,0,1,.15.43v2.73a.57.57,0,0,1-.14.42.53.53,0,0,1-.38.13h-4.75v5.42h6a.48.48,0,0,1,.34.14.57.57,0,0,1,.14.41V280a.57.57,0,0,1-.14.42.48.48,0,0,1-.34.14H307c-.37,0-.56-.2-.56-.61V259Z'
              transform='translate(-218.81 -248.83)'
            />
            <path
              fill={svgFill}
              d='M334.72,280c-.1.37-.3.56-.62.56h-2.62a.63.63,0,0,1-.64-.56L326.3,259a.72.72,0,0,1,0-.46.33.33,0,0,1,.31-.17h3.26a.84.84,0,0,1,.44.13.51.51,0,0,1,.23.4l2,12.83.16,1.87.18-1.87,2-12.83a.55.55,0,0,1,.23-.4.94.94,0,0,1,.44-.13h3.32a.32.32,0,0,1,.31.16.54.54,0,0,1,0,.43Z'
              transform='translate(-218.81 -248.83)'
            />
          </motion.svg>
        </Box>
      </AnimatePresence>
    </Box>
  );
}
